{"version":3,"sources":["components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","services/ImageApi.jsx","images/404-not-found.jpg","components/Button/Button.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","App.js","index.js","components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","searchQuery","setSearchQuery","className","s","SearchForm","e","preventDefault","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","target","value","ImageGalleryItem","src","alt","onClick","id","ImageGalleryItemImage","ImageApi","page","url","fetch","Button","Modal","onClose","onLeft","onRight","tags","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","Overlay","event","currentTarget","ImageGallery","query","gallery","setGallery","status","setStatus","setPage","showModal","setShowModal","modalImgSrc","setModalImgSrc","currentImgIdx","setCurrentImgIdx","largeImageURL","setLargeImageURL","setAlt","then","response","ok","json","Promise","reject","Error","hits","length","newHits","match","prev","catch","error","console","log","arr","newArr","forEach","push","toggleModal","modalOpen","map","item","idx","color","height","width","timeout","style","textAlign","paddingTop","defaultImage","wrapper","scrollTo","top","document","documentElement","scrollHeight","behavior","App","data","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.afad1e0f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3MmD-\",\"Modal\":\"Modal_Modal__1zqDp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2GrAk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3tNMO\",\"SearchForm\":\"Searchbar_SearchForm__r6g5_\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3uQUd\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1IUp1\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1KL1S\"};","import { useState } from \"react\";\nimport s from \"./Searchbar.module.css\";\n\nexport default function Searchbar({ onSubmit }) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const handleInputChange = (e) => {\n    setSearchQuery(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onSubmit(searchQuery);\n    setSearchQuery(\"\");\n  };\n\n  return (\n    <header className={s.Searchbar}>\n      <form className={s.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={s.SearchFormButton}>\n          <span className={s.SearchFormButtonLabel}>Search</span>\n        </button>\n\n        <input\n          className={s.SearchFormInput}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          onChange={handleInputChange}\n          value={searchQuery}\n        />\n      </form>\n    </header>\n  );\n}\n","import s from \"./ImageGalleryItem.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default function ImageGalleryItem({ src, alt, onClick, id }) {\n  return (\n    <li\n      className={s.ImageGalleryItem}\n      onClick={() => {\n        onClick(src, alt, id);\n      }}\n    >\n      <img src={src} alt={alt} className={s.ImageGalleryItemImage} id={id} />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string,\n  alt: PropTypes.string,\n  onClick: PropTypes.func,\n  dataId: PropTypes.number,\n};\n","export default function ImageApi(searchQuery, page) {\n  const KEY = \"22566981-b2c0de401259c0633e20b55b4\";\n  const BASE_URL = \"https://pixabay.com/api/\";\n  const url = `${BASE_URL}?q=${searchQuery}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n\n  return fetch(url);\n}\n","export default __webpack_public_path__ + \"static/media/404-not-found.8fe7be60.jpg\";","import s from \"./Button.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default function Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","import { useEffect } from \"react\";\nimport s from \"./Modal.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default function Modal({ onClose, onLeft, onRight, src, tags }) {\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    // console.log(\"add handleKeyDown \" + Date.now());\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      // console.log(\"remove handleKeyDown \" + Date.now());\n    };\n  });\n\n  const handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      onClose();\n    } else if (e.code === \"ArrowLeft\") {\n      onLeft();\n    } else if (e.code === \"ArrowRight\") {\n      onRight();\n    }\n  };\n\n  const handleOverlayClick = (event) => {\n    if (event.currentTarget === event.target) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className={s.Overlay} onClick={handleOverlayClick}>\n      <div>\n        <img src={src} alt={tags} className={s.Modal} />\n      </div>\n    </div>\n  );\n}\n\nModal.propTypes = {\n  src: PropTypes.string,\n  tags: PropTypes.string,\n};\n","import { useState, useEffect } from \"react\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport s from \"./ImageGallery.module.css\";\nimport ImageApi from \"../../services/ImageApi\";\nimport defaultImage from \"../../images/404-not-found.jpg\";\nimport Button from \"../Button/Button\";\nimport Modal from \"../Modal/Modal\";\n\nexport default function ImageGallery({ query }) {\n  const [gallery, setGallery] = useState([]);\n  const [status, setStatus] = useState(\"idle\");\n  const [page, setPage] = useState(1);\n  const [showModal, setShowModal] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(null);\n  const [modalImgSrc, setModalImgSrc] = useState(\"\");\n  const [currentImgIdx, setCurrentImgIdx] = useState(\"\");\n  const [largeImageURL, setLargeImageURL] = useState(\"\");\n  const [alt, setAlt] = useState(\"\");\n\n  useEffect(() => {\n    if (query !== \"initialState\") {\n      setStatus(\"pending\");\n      ImageApi(query)\n        .then((response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          return Promise.reject(new Error(`no images on request`));\n        })\n        .then(({ hits }) => {\n          if (hits.length === 0) {\n            setStatus(\"rejected\");\n          } else {\n            const newHits = match(hits);\n            setGallery(newHits);\n            setStatus(\"resolved\");\n            setPage((prev) => prev + 1);\n            setSearchQuery(query);\n          }\n        })\n        .catch((error) => {\n          setStatus(\"rejected\");\n          console.log(error);\n        });\n    }\n  }, [query]);\n\n  const loadmore = () => {\n    ImageApi(searchQuery, page)\n      .then((response) => {\n        return response.json();\n      })\n      .then(({ hits }) => {\n        const newHits = match(hits);\n        setGallery((prev) => [...prev, ...newHits]);\n        setPage((prev) => prev + 1);\n      })\n      .then(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      })\n      .catch((error) => {\n        setStatus(\"rejected\");\n        console.log(error);\n      });\n  };\n\n  const match = (arr) => {\n    const newArr = [];\n    arr.forEach(({ id, largeImageURL, tags }) => {\n      newArr.push({ id, largeImageURL, tags });\n    });\n    return newArr;\n  };\n\n  const toggleModal = () => {\n    setShowModal((prev) => !prev);\n    setModalImgSrc(\"\");\n  };\n\n  const decrementModal = () => {\n    if (currentImgIdx > 0) {\n      setModalImgSrc(gallery[currentImgIdx - 1].largeImageURL);\n      setCurrentImgIdx((prev) => prev - 1);\n    }\n  };\n\n  const incrementModal = () => {\n    if (currentImgIdx < gallery.length - 1) {\n      setModalImgSrc(gallery[currentImgIdx + 1].largeImageURL);\n      setCurrentImgIdx((prev) => prev + 1);\n    }\n  };\n\n  const modalOpen = (src, alt, id) => {\n    setLargeImageURL(src);\n    setAlt(alt);\n    toggleModal();\n    gallery.map((item, idx) => {\n      if (item.id === id) {\n        setCurrentImgIdx(idx);\n      }\n      return \"\";\n    });\n  };\n\n  if (status === \"idle\") {\n    return \"\";\n  }\n  if (status === \"pending\") {\n    return (\n      <Loader\n        type=\"Audio\"\n        color=\"#3f51b5\"\n        height={100}\n        width={100}\n        timeout={300000}\n        style={{ textAlign: \"center\", paddingTop: \"25px\" }}\n      />\n    );\n  }\n  if (status === \"rejected\") {\n    return (\n      <img\n        src={defaultImage}\n        alt={\"По вашему запросу ничего не найдено(\"}\n        className={s.defaultImage}\n      />\n    );\n  }\n  if (status === \"resolved\") {\n    return (\n      <div className={s.wrapper}>\n        {showModal && (\n          <Modal\n            onClose={toggleModal}\n            onLeft={decrementModal}\n            onRight={incrementModal}\n            src={modalImgSrc || largeImageURL}\n            tags={alt}\n          />\n        )}\n        <ul className={s.ImageGallery}>\n          {gallery.map(({ largeImageURL, tags, id }) => {\n            return (\n              <ImageGalleryItem\n                src={largeImageURL}\n                alt={tags}\n                onClick={modalOpen}\n                key={id}\n                id={id}\n              />\n            );\n          })}\n        </ul>\n        <Button onClick={loadmore} />\n      </div>\n    );\n  }\n}\n","import { useState } from \"react\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\n\nexport default function App() {\n  const [searchQuery, setSearchQuery] = useState(\"initialState\");\n\n  const sendQueryInState = (data) => {\n    setSearchQuery(data);\n  };\n\n  return (\n    <>\n      <Searchbar onSubmit={sendQueryInState} />\n      <ImageGallery query={searchQuery} />\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"modern-normalize/modern-normalize.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__9TZRK\",\"defaultImage\":\"ImageGallery_defaultImage__3i1Zu\",\"wrapper\":\"ImageGallery_wrapper__1kBoo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3_dGo\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1FObS\"};"],"sourceRoot":""}