{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","services/ImageApi.jsx","images/404-not-found.jpg","components/Button/Button.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","App.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","state","searchQuery","handleInputChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","src","alt","onClick","id","ImageGalleryItemImage","ImageApi","page","url","fetch","Button","Modal","handleKeyDown","code","onClose","onLeft","onRight","handleOverlayClick","event","target","window","addEventListener","removeEventListener","Overlay","tags","ImageGallery","gallery","status","showModal","loadmore","then","response","json","hits","newHits","match","prevState","scrollTo","top","document","documentElement","scrollHeight","behavior","catch","error","console","log","toggleModal","decrementModal","currentImgIdx","modalImgSrc","largeImageURL","incrementModal","length","modalOpen","map","item","idx","prevProps","prevQuery","query","nextQuery","ok","Promise","reject","Error","arr","newArr","forEach","push","color","height","width","timeout","style","textAlign","paddingTop","defaultImage","wrapper","App","sendQueryInState","data","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.dce490a1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3_dGo\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1FObS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3MmD-\",\"Modal\":\"Modal_Modal__1zqDp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2GrAk\"};","import { Component } from \"react\";\nimport s from \"./Searchbar.module.css\";\n\nexport default class Searchbar extends Component {\n  state = { searchQuery: \"\" };\n\n  handleInputChange = (e) => {\n    this.setState({ searchQuery: e.currentTarget.value });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.onSubmit(this.state);\n    this.setState({ searchQuery: \"\" });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleInputChange}\n            value={this.state.searchQuery}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import s from \"./ImageGalleryItem.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default function ImageGalleryItem({ src, alt, onClick, id }) {\n  return (\n    <li\n      className={s.ImageGalleryItem}\n      onClick={() => {\n        onClick(src, alt, id);\n      }}\n    >\n      <img src={src} alt={alt} className={s.ImageGalleryItemImage} id={id} />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string,\n  alt: PropTypes.string,\n  onClick: PropTypes.func,\n  dataId: PropTypes.number,\n};\n","export default function ImageApi(searchQuery, page) {\n  const KEY = \"22566981-b2c0de401259c0633e20b55b4\";\n  const BASE_URL = \"https://pixabay.com/api/\";\n  const url = `${BASE_URL}?q=${searchQuery}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n\n  return fetch(url);\n}\n","export default __webpack_public_path__ + \"static/media/404-not-found.8fe7be60.jpg\";","import s from \"./Button.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default function Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","import { Component } from \"react\";\nimport s from \"./Modal.module.css\";\nimport PropTypes from \"prop-types\";\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onClose();\n    } else if (e.code === \"ArrowLeft\") {\n      this.props.onLeft();\n    } else if (e.code === \"ArrowRight\") {\n      this.props.onRight();\n    }\n  };\n\n  handleOverlayClick = (event) => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={s.Overlay} onClick={this.handleOverlayClick}>\n        <div>\n          <img src={this.props.src} alt={this.props.tags} className={s.Modal} />\n        </div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  src: PropTypes.string,\n  tags: PropTypes.string,\n};\n","import { Component } from \"react\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport s from \"./ImageGallery.module.css\";\nimport ImageApi from \"../../services/ImageApi\";\nimport defaultImage from \"../../images/404-not-found.jpg\";\nimport Button from \"../Button/Button\";\nimport Modal from \"../Modal/Modal\";\n\nexport default class ImageGallery extends Component {\n  state = {\n    gallery: [],\n    status: \"idle\",\n    page: 1,\n    showModal: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevProps.query;\n    const nextQuery = this.props.query;\n\n    if (prevQuery !== nextQuery) {\n      this.setState({ status: \"pending\" });\n      ImageApi(nextQuery)\n        .then((response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          return Promise.reject(new Error(`no images on request`));\n        })\n        .then(({ hits }) => {\n          if (hits.length === 0) {\n            this.setState({ status: \"rejected\" });\n          } else {\n            const newHits = this.match(hits);\n            this.setState({\n              gallery: newHits,\n              status: \"resolved\",\n              page: this.state.page + 1,\n              searchQuery: nextQuery,\n            });\n          }\n        })\n        .catch((error) => {\n          this.setState({ status: \"rejected\" });\n          console.log(error);\n        });\n    }\n  }\n\n  loadmore = () => {\n    const { searchQuery, page } = this.state;\n\n    ImageApi(searchQuery, page)\n      .then((response) => {\n        return response.json();\n      })\n      .then(({ hits }) => {\n        const newHits = this.match(hits);\n        this.setState((prevState) => ({\n          gallery: [...prevState.gallery, ...newHits],\n          page: page + 1,\n        }));\n      })\n      .then(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      })\n      .catch((error) => {\n        this.setState({ status: \"rejected\" });\n        console.log(error);\n      });\n  };\n\n  match(arr) {\n    const newArr = [];\n    arr.forEach(({ id, largeImageURL, tags }) => {\n      newArr.push({ id, largeImageURL, tags });\n    });\n    return newArr;\n  }\n\n  toggleModal = () => {\n    this.setState((prevState) => ({ showModal: !prevState.showModal }));\n  };\n\n  decrementModal = () => {\n    const { currentImgIdx, gallery } = this.state;\n    if (currentImgIdx > 0) {\n      this.setState({\n        modalImgSrc: gallery[currentImgIdx - 1].largeImageURL,\n        currentImgIdx: currentImgIdx - 1,\n      });\n    }\n  };\n\n  incrementModal = () => {\n    const { currentImgIdx, gallery } = this.state;\n    if (currentImgIdx < gallery.length - 1) {\n      this.setState({\n        modalImgSrc: gallery[currentImgIdx + 1].largeImageURL,\n        currentImgIdx: currentImgIdx + 1,\n      });\n    }\n  };\n\n  modalOpen = (src, alt, id) => {\n    this.setState({\n      largeImageURL: src,\n      alt,\n    });\n    this.toggleModal();\n\n    this.state.gallery.map((item, idx) => {\n      if (item.id === id) {\n        this.setState({\n          currentImgIdx: idx,\n        });\n      }\n      return \"\";\n    });\n  };\n\n  render() {\n    const { status, gallery, showModal, largeImageURL, alt, modalImgSrc } =\n      this.state;\n\n    if (status === \"idle\") {\n      return \"\";\n    }\n    if (status === \"pending\") {\n      return (\n        <Loader\n          type=\"Audio\"\n          color=\"#3f51b5\"\n          height={100}\n          width={100}\n          timeout={300000}\n          style={{ textAlign: \"center\", paddingTop: \"25px\" }}\n        />\n      );\n    }\n    if (status === \"rejected\") {\n      return (\n        <img\n          src={defaultImage}\n          alt={\"По вашему запросу ничего не найдено(\"}\n          className={s.defaultImage}\n        />\n      );\n    }\n    if (status === \"resolved\") {\n      return (\n        <div className={s.wrapper}>\n          {showModal && (\n            <Modal\n              onClose={this.toggleModal}\n              onLeft={this.decrementModal}\n              onRight={this.incrementModal}\n              src={modalImgSrc || largeImageURL}\n              tags={alt}\n            />\n          )}\n          <ul className={s.ImageGallery}>\n            {gallery.map(({ largeImageURL, tags, id }) => {\n              return (\n                <ImageGalleryItem\n                  src={largeImageURL}\n                  alt={tags}\n                  onClick={this.modalOpen}\n                  key={id}\n                  id={id}\n                />\n              );\n            })}\n          </ul>\n          <Button onClick={this.loadmore} />\n        </div>\n      );\n    }\n  }\n}\n","import { Component } from \"react\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\n\nexport default class App extends Component {\n  state = { searchQuery: \"\" };\n\n  sendQueryInState = (data) => {\n    this.setState(data);\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <>\n        <Searchbar onSubmit={this.sendQueryInState} />\n        <ImageGallery query={searchQuery} />\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"modern-normalize/modern-normalize.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3tNMO\",\"SearchForm\":\"Searchbar_SearchForm__r6g5_\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3uQUd\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1IUp1\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1KL1S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__9TZRK\",\"defaultImage\":\"ImageGallery_defaultImage__3i1Zu\",\"wrapper\":\"ImageGallery_wrapper__1kBoo\"};"],"sourceRoot":""}